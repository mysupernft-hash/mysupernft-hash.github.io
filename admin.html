<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>SuperNFT Admin Panel</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{
  margin:0;
  font-family:Arial;
  background:#020617;
  color:#fff;
}
header{
  text-align:center;
  padding:16px;
  font-size:22px;
  color:#facc15;
  border-bottom:1px solid #1e293b;
}
.nav{
  display:flex;
  justify-content:center;
  gap:10px;
  padding:12px;
  flex-wrap:wrap;
}
.nav a, .nav button{
  padding:8px 16px;
  border-radius:20px;
  border:1px solid #38bdf8;
  background:#0f172a;
  color:#38bdf8;
  text-decoration:none;
  font-weight:bold;
  cursor:pointer;
}
.nav button{
  background:#f87171;
  color:#020617;
  border:none;
}
.section{
  padding:15px;
}
.box{
  background:#0f172a;
  padding:14px;
  border-radius:14px;
  margin-bottom:15px;
}
.box h3{
  margin:0 0 10px;
  color:#38bdf8;
}
table{
  width:100%;
  border-collapse:collapse;
  font-size:13px;
}
th,td{
  border-bottom:1px solid #1e293b;
  padding:8px;
  text-align:center;
}
th{
  color:#facc15;
}
.approve{
  background:#22c55e;
  border:none;
  padding:6px 10px;
  border-radius:6px;
  cursor:pointer;
}
.reject{
  background:#ef4444;
  border:none;
  padding:6px 10px;
  border-radius:6px;
  cursor:pointer;
}
.small{
  font-size:12px;
  opacity:0.8;
}
</style>
</head>

<body>

<header>üõ† SuperNFT Admin Panel</header>

<div class="nav">
  <a href="dashboard.html">üè† Dashboard</a>
  <a href="account.html">üë§ Account</a>
  <button onclick="adminLogout()">üö™ Logout</button>
</div>

<div class="section">

  <!-- USERS SUMMARY -->
  <div class="box">
    <h3>üë• Users Summary</h3>
    <div id="userStats" class="small"></div>
  </div>

  <!-- INVESTMENTS -->
  <div class="box">
    <h3>üí∞ All Investments</h3>
    <table>
      <thead>
        <tr>
          <th>#</th>
          <th>Price</th>
          <th>Daily</th>
          <th>Date</th>
        </tr>
      </thead>
      <tbody id="investTable"></tbody>
    </table>
  </div>

  <!-- WITHDRAW REQUESTS -->
  <div class="box">
    <h3>üí∏ Withdraw Requests</h3>
    <table>
      <thead>
        <tr>
          <th>#</th>
          <th>Amount</th>
          <th>Status</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody id="withdrawTable"></tbody>
    </table>
  </div>

  <!-- ADMIN CONTROLS -->
  <div class="box">
    <h3>‚ö†Ô∏è Admin Controls</h3>
    <button onclick="resetWithdraws()">Reset Withdraw Requests</button>
    <button onclick="resetAllData()" style="margin-left:10px">
      Reset ALL User Data
    </button>
  </div>

</div>

<script>
/* üîê ADMIN PROTECTION */
if(localStorage.getItem("isAdmin")!=="true"){
  alert("Admin access required");
  location.href="dashboard.html";
}

/* LOGOUT */
function adminLogout(){
  localStorage.removeItem("isAdmin");
  location.href="dashboard.html";
}

/* USERS SUMMARY */
function loadStats(){
  const nfts = JSON.parse(localStorage.getItem("myNFTs")) || [];
  const withdraws = JSON.parse(localStorage.getItem("withdrawRequests")) || [];
  let invested=0, daily=0;

  nfts.forEach(n=>{
    invested+=Number(n.price);
    daily+=Number(n.daily);
  });

  userStats.innerHTML = `
    Total NFTs: ${nfts.length}<br>
    Total Invested: $${invested.toFixed(2)}<br>
    Daily Income: $${daily.toFixed(2)}<br>
    Withdraw Requests: ${withdraws.length}
  `;
}

/* INVESTMENT TABLE */
function loadInvestments(){
  const data = JSON.parse(localStorage.getItem("myNFTs")) || [];
  investTable.innerHTML="";
  data.forEach((n,i)=>{
    investTable.innerHTML+=`
      <tr>
        <td>${i+1}</td>
        <td>$${n.price}</td>
        <td>$${n.daily.toFixed(2)}</td>
        <td>${new Date(n.boughtAt).toLocaleDateString()}</td>
      </tr>`;
  });
}

/* WITHDRAW TABLE */
function loadWithdraws(){
  const data = JSON.parse(localStorage.getItem("withdrawRequests")) || [];
  withdrawTable.innerHTML="";
  data.forEach((w,i)=>{
    withdrawTable.innerHTML+=`
      <tr>
        <td>${i+1}</td>
        <td>$${w.amount}</td>
        <td>${w.status}</td>
        <td>
          <button class="approve" onclick="approve(${i})">‚úî</button>
          <button class="reject" onclick="reject(${i})">‚úñ</button>
        </td>
      </tr>`;
  });
}

function approve(i){
  const data = JSON.parse(localStorage.getItem("withdrawRequests"));
  data[i].status="Approved";
  localStorage.setItem("withdrawRequests",JSON.stringify(data));
  loadWithdraws();
}

function reject(i){
  const data = JSON.parse(localStorage.getItem("withdrawRequests"));
  data[i].status="Rejected";
  localStorage.setItem("withdrawRequests",JSON.stringify(data));
  loadWithdraws();
}

/* RESET OPTIONS */
function resetWithdraws(){
  if(confirm("Reset all withdraw requests?")){
    localStorage.removeItem("withdrawRequests");
    loadWithdraws();
    loadStats();
  }
}

function resetAllData(){
  if(confirm("‚ö†Ô∏è DELETE ALL USER DATA?")){
    localStorage.clear();
    alert("All data cleared");
    location.href="index.html";
  }
}

/* INIT */
loadStats();
loadInvestments();
loadWithdraws();
</script>

</body>
</html>
