<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Admin Panel - SuperNFT</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{margin:0;font-family:Arial,sans-serif;background:#020617;color:white;}
header{background:#0a192f;padding:15px 20px;display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid #1e293b;}
header .logo{font-size:22px;font-weight:bold;color:#38bdf8;}
nav a{color:#38bdf8;margin-left:15px;text-decoration:none;font-weight:bold;}
table{width:100%;border-collapse:collapse;margin:20px 0;}
th,td{padding:10px;border:1px solid #38bdf8;text-align:center;}
th{background:#0f172a;}
button{padding:5px 10px;border:none;border-radius:6px;background:#38bdf8;color:#020617;cursor:pointer;font-weight:bold;margin:2px;}
</style>
</head>
<body>

<header>
  <div class="logo">SuperNFT Admin Panel</div>
  <nav>
    <a href="dashboard.html">Back to Dashboard</a>
    <a href="#" onclick="logoutAdmin()">Logout</a>
  </nav>
</header>

<h2 style="text-align:center;margin-top:20px;">Users</h2>
<table id="usersTable">
  <thead>
    <tr>
      <th>Name</th>
      <th>Email</th>
      <th>Deposit</th>
      <th>Wallet</th>
      <th>Referral Code</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>

<h2 style="text-align:center;margin-top:20px;">NFTs</h2>
<table id="nftTable">
  <thead>
    <tr>
      <th>Category</th>
      <th>Price</th>
      <th>Daily %</th>
      <th>Image</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>

<script>
// -------- Admin access check --------
if(localStorage.getItem("isAdmin")!=="true"){
  alert("Access denied!");
  window.location.href="admin-login.html";
}

// -------- Demo Data --------
if(!localStorage.getItem("users")){
  const demoUsers=[
    {name:"Shivam",email:"shivam@gmail.com",deposit:10,wallet:0,ref:"SNFT123456"},
    {name:"Aman",email:"aman@gmail.com",deposit:50,wallet:0,ref:"SNFT654321"}
  ];
  localStorage.setItem("users",JSON.stringify(demoUsers));
}

if(!localStorage.getItem("NFTS")){
  const demoNFTS=[
    {cat:"starter",price:10,p:2,img:"images/IMG_0458.png"},
    {cat:"starter",price:15,p:2,img:"images/IMG_0459.png"}
  ];
  localStorage.setItem("NFTS",JSON.stringify(demoNFTS));
}

// -------- Render Users Table --------
function renderUsers(){
  const users=JSON.parse(localStorage.getItem("users"));
  const tbody=document.querySelector("#usersTable tbody");
  tbody.innerHTML="";
  users.forEach((u,i)=>{
    tbody.innerHTML+=`<tr>
      <td>${u.name}</td>
      <td>${u.email}</td>
      <td>$${u.deposit}</td>
      <td>$${u.wallet}</td>
      <td>${u.ref}</td>
      <td>
        <button onclick="editUser(${i})">Edit</button>
        <button onclick="deleteUser(${i})">Delete</button>
      </td>
    </tr>`;
  });
}
renderUsers();

function editUser(i){
  const users=JSON.parse(localStorage.getItem("users"));
  const newDeposit=prompt("Enter new deposit amount:",users[i].deposit);
  if(newDeposit!==null){
    users[i].deposit=parseFloat(newDeposit);
    localStorage.setItem("users",JSON.stringify(users));
    renderUsers();
  }
}
function deleteUser(i){
  const users=JSON.parse(localStorage.getItem("users"));
  if(confirm("Delete this user?")){
    users.splice(i,1);
    localStorage.setItem("users",JSON.stringify(users));
    renderUsers();
  }
}

// -------- Render NFT Table --------
function renderNFTs(){
  const nfts=JSON.parse(localStorage.getItem("NFTS"));
  const tbody=document.querySelector("#nftTable tbody");
  tbody.innerHTML="";
  nfts.forEach((n,i)=>{
    tbody.innerHTML+=`<tr>
      <td>${n.cat}</td>
      <td>$${n.price}</td>
      <td>${n.p}%</td>
      <td><img src="${n.img}" width="50"></td>
      <td>
        <button onclick="editNFT(${i})">Edit</button>
        <button onclick="deleteNFT(${i})">Delete</button>
      </td>
    </tr>`;
  });
}
renderNFTs();

function editNFT(i){
  const nfts=JSON.parse(localStorage.getItem("NFTS"));
  const newPrice=prompt("Enter new price:",nfts[i].price);
  if(newPrice!==null){
    nfts[i].price=parseFloat(newPrice);
    localStorage.setItem("NFTS",JSON.stringify(nfts));
    renderNFTs();
  }
}
function deleteNFT(i){
  const nfts=JSON.parse(localStorage.getItem("NFTS"));
  if(confirm("Delete this NFT?")){
    nfts.splice(i,1);
    localStorage.setItem("NFTS",JSON.stringify(nfts));
    renderNFTs();
  }
}

// -------- Logout --------
function logoutAdmin(){
  localStorage.removeItem("isAdmin");
  window.location.href="admin-login.html";
}
</script>

</body>
</html>
