<!DOCTYPE html>
<html>
<head>
<title>Admin Panel | SuperNFT</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body{background:#020617;color:white;font-family:Arial;margin:0}
header{background:#020617;padding:15px;text-align:center;font-size:20px;font-weight:bold}
.container{padding:20px}
.card{background:#0f172a;padding:15px;border-radius:12px;margin-bottom:15px}
button{padding:8px 14px;border:none;border-radius:8px;background:#38bdf8;font-weight:bold;cursor:pointer}
input{padding:8px;border-radius:6px;border:none;width:100%;margin-top:8px}
.hidden{display:none}
table{width:100%;border-collapse:collapse;margin-top:10px}
th,td{border:1px solid #334155;padding:8px;text-align:center}
th{background:#020617}
</style>
</head>
<body>

<header>üîê SuperNFT Admin Panel</header>

<!-- LOGIN -->
<div class="container" id="loginBox">
<div class="card">
<h3>Admin Login</h3>
<input id="user" placeholder="Username">
<input id="pass" type="password" placeholder="Password">
<button onclick="adminLogin()">Login</button>
<p id="loginMsg"></p>
</div>
</div>

<!-- DASHBOARD -->
<div class="container hidden" id="adminPanel">

<div class="card">
<h3>üí≥ Deposit Requests</h3>
<table id="depositTable">
<tr>
<th>Amount</th><th>TXID</th><th>Status</th><th>Action</th>
</tr>
</table>
</div>

<div class="card">
<h3>üí∏ Withdraw Requests</h3>
<table id="withdrawTable">
<tr>
<th>Amount</th><th>Wallet</th><th>Status</th><th>Action</th>
</tr>
</table>
</div>

<button onclick="logout()">Logout</button>
</div>

<script>
function adminLogin(){
  if(user.value==="shvm01.ss" && pass.value==="shivatrainer3520"){
    loginBox.classList.add("hidden");
    adminPanel.classList.remove("hidden");
    loadData();
  } else {
    loginMsg.innerText="‚ùå Invalid admin credentials";
  }
}

function loadData(){
  loadDeposits();
  loadWithdraws();
}

function loadDeposits(){
  let deposits = JSON.parse(localStorage.getItem("deposits")) || [];
  depositTable.innerHTML=`<tr><th>Amount</th><th>TXID</th><th>Status</th><th>Action</th></tr>`;
  deposits.forEach((d,i)=>{
    depositTable.innerHTML+=`
    <tr>
      <td>$${d.amount}</td>
      <td>${d.txid}</td>
      <td>${d.status}</td>
      <td>${d.status==="Pending" ? `<button onclick="approveDeposit(${i})">Approve</button>` : "Approved"}</td>
    </tr>`;
  });
}

function approveDeposit(i){
  let deposits = JSON.parse(localStorage.getItem("deposits"));
  let wallet = parseFloat(localStorage.getItem("walletBalance")) || 0;
  wallet += deposits[i].amount;
  localStorage.setItem("walletBalance", wallet);

  deposits[i].status="Approved";
  localStorage.setItem("deposits", JSON.stringify(deposits));
  loadDeposits();
  alert("Deposit Approved & Wallet Updated");
}

function loadWithdraws(){
  let w = JSON.parse(localStorage.getItem("withdrawals")) || [];
  withdrawTable.innerHTML=`<tr><th>Amount</th><th>Wallet</th><th>Status</th><th>Action</th></tr>`;
  w.forEach((x,i)=>{
    withdrawTable.innerHTML+=`
    <tr>
      <td>$${x.amount}</td>
      <td>${x.wallet}</td>
      <td>${x.status}</td>
      <td>${x.status==="Pending" ? `<button onclick="approveWithdraw(${i})">Paid</button>` : "Completed"}</td>
    </tr>`;
  });
}

function approveWithdraw(i){
  let w = JSON.parse(localStorage.getItem("withdrawals"));
  w[i].status="Completed";
  localStorage.setItem("withdrawals", JSON.stringify(w));
  loadWithdraws();
  alert("Withdraw marked as Paid");
}

function logout(){
  location.reload();
}
</script>

</body>
</html>
