<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>SuperNFT Admin Panel</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body{margin:0;font-family:Arial;background:#020617;color:white}
header{padding:15px;text-align:center;font-size:22px;color:#38bdf8;border-bottom:1px solid #1e293b}
.box{background:#0f172a;padding:12px;margin:12px;border-radius:12px}
button{padding:8px 12px;margin-top:6px;border:none;border-radius:8px;background:#38bdf8;color:#020617;cursor:pointer}
</style>
</head>
<body>

<header>ðŸ›¡ SuperNFT Admin Panel</header>

<div id="pinDiv" class="box">
  Enter Admin PIN:<br>
  <input type="password" id="pinInput">
  <button onclick="checkPin()">Login</button>
</div>

<div id="adminContent" style="display:none;">
  <div class="box">
    <h3>Withdraw Requests</h3>
    <div id="withdrawList"></div>
  </div>

  <div class="box">
    <h3>User Wallets</h3>
    <div id="walletList"></div>
  </div>

  <div class="box">
    <h3>NFT Management</h3>
    <div id="nftManage"></div>
  </div>

  <button onclick="logoutAdmin()">Logout</button>
</div>

<script>
const ADMIN_PIN="1008";

function openAdmin(){
  let pin = prompt("Enter Admin PIN");
  if(pin === "1008"){
    sessionStorage.setItem("adminSession","active");
    alert("Admin Access Granted");
    window.location.href = "admin.html"; // Direct navigation after correct PIN
  } else {
    alert("Wrong PIN");
  }
}
}

function logoutAdmin(){
  sessionStorage.removeItem("adminSession");
  location.reload();
}

/* ---------- Withdraw Approval ---------- */
function loadWithdraws(){
  let reqs=JSON.parse(localStorage.getItem("withdrawReq"))||[];
  let html="";
  reqs.forEach((r,i)=>{
    html+=`$${r.amount} - ${r.status} 
      ${r.status==="Pending"?`<button onclick="approve(${i})">Approve</button>`:""}<br>`;
  });
  document.getElementById("withdrawList").innerHTML=html;
}
function approve(i){
  let reqs=JSON.parse(localStorage.getItem("withdrawReq"))||[];
  reqs[i].status="Approved";
  localStorage.setItem("withdrawReq",JSON.stringify(reqs));
  loadWithdraws();
}

/* ---------- Wallet Control ---------- */
function loadWallets(){
  let users=JSON.parse(localStorage.getItem("users"))||[];
  let html="";
  users.forEach((u,i)=>{
    html+=`${u.name} - $${u.wallet||0} <button onclick="addBalance(${i})">Add $10</button><br>`;
  });
  document.getElementById("walletList").innerHTML=html;
}
function addBalance(i){
  let users=JSON.parse(localStorage.getItem("users"))||[];
  users[i].wallet = (users[i].wallet||0)+10;
  localStorage.setItem("users",JSON.stringify(users));
  loadWallets();
}

/* ---------- NFT Management ---------- */
function loadNFTs(){
  let nfts=JSON.parse(localStorage.getItem("myNFTs"))||[];
  let html="";
  nfts.forEach((n,i)=>{
    html+=`$${n.price} - Daily $${n.daily.toFixed(2)} 
      <button onclick="removeNFT(${i})">Remove</button><br>`;
  });
  document.getElementById("nftManage").innerHTML=html;
}
function removeNFT(i){
  let nfts=JSON.parse(localStorage.getItem("myNFTs"))||[];
  nfts.splice(i,1);
  localStorage.setItem("myNFTs",JSON.stringify(nfts));
  loadNFTs();
}

/* ---------- Auto load if already logged in ---------- */
if(sessionStorage.getItem("adminSession")==="active"){
  document.getElementById("pinDiv").style.display="none";
  document.getElementById("adminContent").style.display="block";
  loadWithdraws(); loadWallets(); loadNFTs();
}
</script>

</body>
</html>
