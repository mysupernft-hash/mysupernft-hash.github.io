<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Admin</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<style>
body{margin:0;font-family:Arial;background:#020617;color:#fff}
header{text-align:center;padding:15px;color:#facc15}
table{width:100%;font-size:13px}
td,th{padding:6px;border-bottom:1px solid #1e293b}
button{padding:4px 8px}
</style>
</head>

<body>

<header>Admin Panel</header>

<table>
<tr><th>Amount</th><th>Status</th><th>Action</th></tr>
<tbody id="t"></tbody>
</table>

<script>
if(localStorage.getItem("isAdmin")!=="true"){
  alert("Denied");location.href="dashboard.html";
}

function load(){
  const d=JSON.parse(localStorage.getItem("withdrawRequests"))||[];
  t.innerHTML="";
  d.forEach((r,i)=>{
    t.innerHTML+=`
    <tr>
      <td>$${r.amount}</td>
      <td>${r.status}</td>
      <td>
        <button onclick="ap(${i})">Approve</button>
        <button onclick="re(${i})">Reject</button>
      </td>
    </tr>`;
  });
}
function ap(i){
  const d=JSON.parse(localStorage.getItem("withdrawRequests"));
  if(d[i].status!=="Pending")return;
  d[i].status="Approved";
  localStorage.setItem("withdrawedTotal",
   (Number(localStorage.getItem("withdrawedTotal"))||0)+d[i].amount);
  localStorage.setItem("withdrawRequests",JSON.stringify(d));
  load();
}
function re(i){
  const d=JSON.parse(localStorage.getItem("withdrawRequests"));
  d[i].status="Rejected";
  localStorage.setItem("withdrawRequests",JSON.stringify(d));
  load();
}
load();
</script>
</body>
</html>
