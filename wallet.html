<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>SuperNFT Wallet</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{
  margin:0;
  font-family:Arial,Helvetica,sans-serif;
  background:#020617;
  color:#fff;
}
header{
  position:sticky;
  top:0;
  background:#0f172a;
  padding:15px;
  text-align:center;
  font-size:20px;
  color:#38bdf8;
  border-bottom:1px solid #1e293b;
}
.container{
  padding:20px;
}
.boxes{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(150px,1fr));
  gap:15px;
}
.box{
  background:#0f172a;
  padding:15px;
  border-radius:14px;
  text-align:center;
}
.box span{
  display:block;
  margin-top:6px;
  font-weight:bold;
  color:#38bdf8;
}
.withdraw{
  margin-top:25px;
  background:#0f172a;
  padding:20px;
  border-radius:14px;
}
.withdraw input{
  width:100%;
  padding:10px;
  border-radius:8px;
  border:none;
  margin-top:10px;
}
.withdraw button{
  width:100%;
  margin-top:12px;
  padding:10px;
  border:none;
  border-radius:10px;
  background:#38bdf8;
  color:#020617;
  font-weight:bold;
  cursor:pointer;
}
.history{
  margin-top:25px;
}
.history h3{
  margin-bottom:10px;
}
.tx{
  background:#0f172a;
  padding:12px;
  border-radius:10px;
  margin-bottom:10px;
  font-size:14px;
}
.status-pending{color:orange}
.status-approved{color:#22c55e}
.status-rejected{color:#ef4444}
.back{
  margin-top:20px;
  display:block;
  text-align:center;
  color:#38bdf8;
  text-decoration:none;
}
</style>
</head>

<body>

<header>üí≥ Wallet</header>

<div class="container">

  <h2>üí∏ Withdraw Funds</h2>

<input type="number" id="withdrawAmount" placeholder="Enter amount" />
<br><br>
<button onclick="requestWithdraw()">Request Withdraw</button>

<p id="withdrawMsg"></p>

<h3>üìú Withdrawal History</h3>
<div id="withdrawHistory"></div>

  <div class="boxes">
    <div class="box">
      Wallet Balance
      <span id="walletBalance">$0.00</span>
    </div>
    <div class="box">
      Total Earned
      <span id="totalEarned">$0.00</span>
    </div>
    <div class="box">
      Total Withdrawn
      <span id="totalWithdrawn">$0.00</span>
    </div>
  </div>

  <div class="withdraw">
    <h3>Withdraw Request</h3>
    <input type="number" id="withdrawAmount" placeholder="Enter amount">
    <button onclick="requestWithdraw()">Request Withdraw</button>
  </div>

  <div class="history">
    <h3>Withdrawal History</h3>
    <div id="withdrawHistory"></div>
  </div>

  <a class="back" href="dashboard.html">‚Üê Back to Dashboard</a>

</div>

<script>
/* --------- INIT DATA --------- */
let wallet = Number(localStorage.getItem("walletBalance")) || 0;
let earned = Number(localStorage.getItem("totalEarned")) || 0;
let withdrawn = Number(localStorage.getItem("totalWithdrawn")) || 0;
let withdrawals = JSON.parse(localStorage.getItem("withdrawals")) || [];

/* --------- UPDATE UI --------- */
function updateUI(){
  walletBalance.innerText = "$" + wallet.toFixed(2);
  totalEarned.innerText = "$" + earned.toFixed(2);
  totalWithdrawn.innerText = "$" + withdrawn.toFixed(2);

  withdrawHistory.innerHTML = "";
  withdrawals.forEach(w=>{
    withdrawHistory.innerHTML += `
      <div class="tx">
        Amount: $${w.amount}<br>
        Date: ${new Date(w.date).toLocaleString()}<br>
        Status: <b class="status-${w.status}">${w.status}</b>
      </div>
    `;
  });
}
updateUI();

/* --------- WITHDRAW --------- */
function requestWithdraw(){
  const amt = Number(withdrawAmount.value);
  if(amt<=0){alert("Enter valid amount");return;}
  if(amt>wallet){alert("Insufficient balance");return;}

  withdrawals.push({
    amount:amt,
    date:Date.now(),
    status:"pending"
  });

  wallet -= amt;
  withdrawn += amt;

  localStorage.setItem("walletBalance",wallet);
  localStorage.setItem("totalWithdrawn",withdrawn);
  localStorage.setItem("withdrawals",JSON.stringify(withdrawals));

  withdrawAmount.value="";
  updateUI();
  alert("Withdraw request submitted (Pending)");
}
</script>

</body>
</html>
