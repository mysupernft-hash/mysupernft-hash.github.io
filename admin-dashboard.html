<!DOCTYPE html>
<html>
<head>
<title>Admin Panel</title>
<style>
body{background:#020617;color:white;font-family:Arial}
table{width:100%;border-collapse:collapse}
th,td{border:1px solid #1e293b;padding:8px;text-align:center}
th{background:#0f172a}
</style>
</head>

<body>

<h2>ðŸ‘‘ Admin Dashboard</h2>
<button onclick="logout()">Logout</button>

<h3>ðŸ“© Claim Requests</h3>

<table>
<tr>
<th>User</th>
<th>Amount</th>
<th>Wallet</th>
<th>Status</th>
<th>Action</th>
</tr>
<tbody id="claimTable"></tbody>
</table>

<script>
function loadClaims(){
  let claims = JSON.parse(localStorage.getItem("claims")) || [];
  let table = document.getElementById("claimTable");
  table.innerHTML="";

  claims.forEach((c,i)=>{
    table.innerHTML+=`
    <tr>
      <td>${c.user}</td>
      <td>$${c.amount.toFixed(2)}</td>
      <td>${c.address}</td>
      <td>${c.status}</td>
      <td>
        ${c.status==="Pending" ? 
        `<button onclick="markPaid(${i})">Mark Paid</button>` 
        : "âœ” Paid"}
      </td>
    </tr>`;
  });
}

function markPaid(i){
  let claims = JSON.parse(localStorage.getItem("claims"));
  claims[i].status="Paid";
  localStorage.setItem("claims",JSON.stringify(claims));
  loadClaims();
}

loadClaims();
</script>
  
<table>
<thead>
<tr>
<th>User</th>
<th>Wallet</th>
<th>Invested</th>
<th>Live Earnings</th>
<th>NFTs</th>
<th>Wallet Address</th>
<th>Paid</th>
<th>Pending</th>
</tr>
</thead>
<tbody id="adminTable"></tbody>
</table>

<script>
if(localStorage.getItem("adminLogged")!=="true"){
  location.href="admin-login.html";
}

function loadUsers(){
  let table=document.getElementById("adminTable");
  table.innerHTML="";

  let users = JSON.parse(localStorage.getItem("users")) || [];

  users.forEach(u=>{
    table.innerHTML+=`
    <tr>
      <td>${u.id}</td>
      <td>$${u.wallet.toFixed(2)}</td>
      <td>$${u.invested.toFixed(2)}</td>
      <td>$${u.earnings.toFixed(2)}</td>
      <td>${u.nfts}</td>
      <td>${u.address || "-"}</td>
      <td>$${u.paid || 0}</td>
      <td>$${(u.earnings-(u.paid||0)).toFixed(2)}</td>
    </tr>`;
  });
}

loadUsers();

function logout(){
  localStorage.removeItem("adminLogged");
  location.href="admin-login.html";
}
</script>

</body>
</html>
