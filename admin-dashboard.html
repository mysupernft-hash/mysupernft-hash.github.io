<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SuperNFT Admin Dashboard</title>
<style>
body{margin:0;font-family:Arial,sans-serif;background:#0b0f1a;color:#fff;}
.topbar{height:60px;background:#111827;display:flex;align-items:center;padding:0 20px;}
.topbar h1{color:#38bdf8;}
.main{padding:20px;}
.stats-container{display:flex;gap:15px;margin-bottom:15px;}
.stat-box{background:#1f2937;padding:15px;border-radius:10px;text-align:center;cursor:pointer;}
.stat-box h3{margin:0 0 8px 0;}
.stat-box p{margin:0;font-weight:bold;}
#logoutBtn{margin-top:20px;padding:10px;background:#38bdf8;color:#000;border:none;border-radius:6px;cursor:pointer;}
</style>
</head>
<body>

<div class="topbar">
  <h1>SuperNFT Admin Dashboard</h1>
</div>

<div class="main">
  <div class="stats-container">
    <div class="stat-box" id="totalUsers">
      <h3>Total Users</h3>
      <p>0</p>
    </div>
    <div class="stat-box" id="totalDeposits">
      <h3>Total Deposits</h3>
      <p>$0</p>
    </div>
    <div class="stat-box" id="totalWithdrawals">
      <h3>Total Withdrawals</h3>
      <p>$0</p>
    </div>
  </div>

  <button id="logoutBtn">Logout</button>
</div>

<script type="module">
import { auth, db } from './firebase.js';
import { onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";
import { collection, getDocs } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

// ðŸ”¹ Check admin login
onAuthStateChanged(auth, async user=>{
  if(!user) window.location.replace("admin-login.html");

  const adminSnap = await getDocs(collection(db,"admin"));
  if(!adminSnap) {
    alert("Access Denied âŒ");
    signOut(auth);
    window.location.replace("admin-login.html");
  }

  // Example: fetch total users
  const usersSnap = await getDocs(collection(db,"users"));
  document.getElementById("totalUsers").querySelector("p").innerText = usersSnap.size;

  // You can similarly fetch deposits, withdrawals etc.
});

// ðŸ”¹ Logout
document.getElementById("logoutBtn").addEventListener("click",()=>{
  signOut(auth).then(()=> window.location.replace("admin-login.html"));
});
</script>

</body>
</html>
