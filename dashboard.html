<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>SuperNFT Dashboard</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{margin:0;font-family:Arial;background:#020617;color:#fff}
header{padding:14px;text-align:center;font-size:22px;color:#38bdf8;border-bottom:1px solid #1e293b}

.topbar{display:flex;justify-content:space-between;align-items:center;padding:10px 15px}
.topbar a, .topbar button{
  color:#38bdf8;background:#0f172a;border:1px solid #38bdf8;
  padding:6px 14px;border-radius:20px;text-decoration:none;cursor:pointer
}

.summary{display:flex;gap:10px;justify-content:center;flex-wrap:wrap;padding:15px}
.box{background:#0f172a;padding:14px 18px;border-radius:14px;min-width:150px;text-align:center}

.tabs{display:flex;gap:8px;padding:10px;overflow-x:auto}
.tabs button{border:1px solid #38bdf8;background:#0f172a;color:#38bdf8;
padding:6px 14px;border-radius:20px}
.tabs button.active{background:#38bdf8;color:#020617}

.grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(160px,1fr));gap:15px;padding:15px}
.card{background:#0f172a;border-radius:16px;padding:10px;text-align:center}
.card img{width:100%;border-radius:12px}
.price{color:#38bdf8;font-weight:bold;margin-top:6px}
.meta{font-size:12px;opacity:.8}
.card button{width:100%;margin-top:8px;padding:8px;border:none;
border-radius:10px;background:#38bdf8;font-weight:bold}

.section{margin:15px;background:#0f172a;padding:15px;border-radius:14px}
.hidden{display:none}

input,select{width:100%;padding:6px;margin-top:6px}
</style>
</head>

<body>

<header>SuperNFT Dashboard</header>

<div class="topbar">
  <a href="account.html">ðŸ‘¤ My Account</a>
  <div>
    <a href="admin.html" id="adminBtn" class="hidden">ðŸ›¡ Admin</a>
    <button onclick="logoutAdmin()">Logout</button>
  </div>
</div>

<!-- SUMMARY -->
<div class="summary">
  <div class="box">Wallet Balance<br><b id="wallet">$0.00</b></div>
  <div class="box">Total Invested<br><b id="invested">$0.00</b></div>
  <div class="box">Daily Income<br><b id="daily">$0.00</b></div>
  <div class="box">Live Earnings<br><b id="live">$0.0000</b></div>
</div>

<!-- WITHDRAW -->
<div class="section">
  <h3>Withdraw</h3>
  <input id="wdAmount" placeholder="Enter amount">
  <button onclick="requestWithdraw()">Request Withdraw</button>
  <div id="wdStatus"></div>
</div>

<!-- TEAM / REFERRAL -->
<div class="section">
  <h3>Team & Referral</h3>
  <div>My Code: <b id="refCode"></b></div>
  <div>Total Team: <b id="teamCount">0</b></div>
  <div>Level Income: <b id="levelIncome">$0.00</b></div>
</div>

<!-- TABS -->
<div class="tabs">
  <button class="active" onclick="filterNFT('all',this)">All</button>
  <button onclick="filterNFT('starter',this)">Starter</button>
  <button onclick="filterNFT('rising',this)">Rising</button>
  <button onclick="filterNFT('elite',this)">Elite</button>
  <button onclick="filterNFT('legendary',this)">Legendary</button>
</div>

<div id="nftGrid" class="grid"></div>

<script>
/* ---------- ADMIN ---------- */
if(sessionStorage.getItem("adminSession")==="active"){
  document.getElementById("adminBtn").classList.remove("hidden");
}
function logoutAdmin(){
  sessionStorage.removeItem("adminSession");
  location.reload();
}

/* ---------- USER INIT ---------- */
if(!localStorage.getItem("wallet")) localStorage.setItem("wallet",0);
if(!localStorage.getItem("myNFTs")) localStorage.setItem("myNFTs","[]");
if(!localStorage.getItem("refCode")){
  localStorage.setItem("refCode","SNFT"+Math.floor(100000+Math.random()*900000));
}
refCode.innerText = localStorage.getItem("refCode");

/* ---------- NFT DATA (30 NFTs) ---------- */
const NFTS=[];
const cats=["starter","rising","elite","legendary"];
let imgNo=458, price=10;

for(let i=0;i<30;i++){
  NFTS.push({
    cat: cats[Math.floor(i/8)],
    price: price,
    daily: +(price*0.01).toFixed(2),
    img: `images/IMG_0${imgNo}.png`,
    days:365
  });
  price+=15; imgNo++;
}

const grid=document.getElementById("nftGrid");

/* ---------- RENDER ---------- */
function renderNFT(cat="all"){
  grid.innerHTML="";
  NFTS.filter(n=>cat==="all"||n.cat===cat).forEach(n=>{
    grid.innerHTML+=`
      <div class="card">
        <img src="${n.img}">
        <div class="price">$${n.price}</div>
        <div class="meta">Daily $${n.daily} | 365 days</div>
        <button onclick="buyNFT(${n.price},${n.daily})">Buy NFT</button>
      </div>`;
  });
}
renderNFT();

function filterNFT(cat,btn){
  document.querySelectorAll(".tabs button").forEach(b=>b.classList.remove("active"));
  btn.classList.add("active");
  renderNFT(cat);
}

/* ---------- BUY NFT ---------- */
function buyNFT(price,daily){
  const data=JSON.parse(localStorage.getItem("myNFTs"));
  data.push({price,daily,start:Date.now(),earned:0});
  localStorage.setItem("myNFTs",JSON.stringify(data));
  alert("NFT Purchased");
}

/* ---------- AUTO DAILY CREDIT ---------- */
setInterval(()=>{
  const data=JSON.parse(localStorage.getItem("myNFTs"));
  let wallet=+localStorage.getItem("wallet");
  data.forEach(n=>{
    n.earned+=n.daily/86400;
    wallet+=n.daily/86400;
  });
  localStorage.setItem("wallet",wallet);
  localStorage.setItem("myNFTs",JSON.stringify(data));
},1000);

/* ---------- SUMMARY ---------- */
function update(){
  const data=JSON.parse(localStorage.getItem("myNFTs"));
  let invested=0,daily=0,live=0;
  data.forEach(n=>{
    invested+=n.price;
    daily+=n.daily;
    live+=n.earned;
  });
  investedEl.innerText="$"+invested.toFixed(2);
  dailyEl.innerText="$"+daily.toFixed(2);
  liveEl.innerText="$"+live.toFixed(4);
  walletEl.innerText="$"+(+localStorage.getItem("wallet")).toFixed(2);
}
const investedEl=invested, dailyEl=daily, liveEl=live, walletEl=wallet;
setInterval(update,1000);

/* ---------- WITHDRAW ---------- */
function requestWithdraw(){
  const amt=+wdAmount.value;
  let wallet=+localStorage.getItem("wallet");
  if(amt>wallet){wdStatus.innerText="Insufficient balance";return;}
  wallet-=amt;
  localStorage.setItem("wallet",wallet);
  wdStatus.innerText="Withdraw requested (Admin approval)";
}
</script>

</body>
</html>
