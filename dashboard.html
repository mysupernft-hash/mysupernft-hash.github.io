<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SuperNFT Dashboard</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
body {
    margin: 0;
    font-family: Arial, sans-serif;
    background: #0f0f0f;
    color: #FFD700;
}
a { text-decoration: none; color: #FFD700; }
/* Header */
header {
    position: sticky;
    top: 0;
    background: #1a1a1a;
    color: #FFD700;
    padding: 10px 20px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    z-index: 1000;
}
header h1 { margin: 0; font-size: 22px; }
.menu-toggle { font-size: 26px; cursor: pointer; }
/* Stats Boxes */
.stats {
    display: flex;
    flex-wrap: wrap;
    gap: 20px;
    margin: 20px;
}
.stat-box {
    flex: 1 1 calc(50% - 20px);
    background: #1a1a1a;
    padding: 20px;
    border-radius: 12px;
    text-align: center;
    cursor: pointer;
    transition: 0.3s;
}
.stat-box:hover { background: #272727; }
.stat-box h2 { margin: 0 0 10px; font-size: 16px; }
.stat-box p { margin: 0; font-size: 20px; font-weight: bold; }
/* NFT Grid */
.nft-grid {
    display: flex;
    flex-wrap: wrap;
    gap: 20px;
    margin: 20px;
}
.nft {
    background: #1a1a1a;
    border-radius: 12px;
    padding: 10px;
    flex: 1 1 calc(50% - 20px);
    text-align: center;
    transition: 0.3s;
}
.nft:hover { transform: scale(1.02); }
.nft img { width: 100%; border-radius: 8px; }
.nft h3 { margin: 10px 0 5px; font-size: 16px; }
.nft p { margin: 3px 0; font-size: 14px; }
.nft button {
    background: #FFD700;
    border: none;
    padding: 8px 12px;
    border-radius: 6px;
    color: #000;
    font-weight: bold;
    transition: 0.2s;
    cursor: pointer;
}
.nft button:hover { background: #e0c200; }
/* Chart */
#earningsChart {
    background: #1a1a1a;
    padding: 10px;
    border-radius: 12px;
    margin: 20px auto;
    display: block;
    max-width: 95%;
}
/* Responsive */
@media(max-width:768px) {
    .stat-box { flex: 1 1 100%; }
    .nft { flex: 1 1 100%; }
}
</style>
</head>
<body>

<header>
    <span class="menu-toggle">&#9776;</span>
    <h1>SuperNFT Dashboard</h1>
    <div id="walletBalanceTop">$0</div>
</header>

<div class="stats">
    <div class="stat-box" id="dailyIncomeBox"><h2>Daily Income</h2><p id="dailyIncome">$0</p></div>
    <div class="stat-box" id="liveEarningsBox"><h2>Live Earnings</h2><p id="liveEarnings">$0</p></div>
    <div class="stat-box" id="depositMoney"><h2>Deposit Money</h2><p>$0</p></div>
    <div class="stat-box" id="walletBalanceBox"><h2>Wallet Balance</h2><p id="walletBalanceP">$0</p></div>
</div>

<h2 style="margin-left:20px;">NFT Marketplace</h2>
<div class="nft-grid" id="nfts"></div>

<h2 style="margin-left:20px;">Earnings Chart</h2>
<canvas id="earningsChart" width="400" height="200"></canvas>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";
import { getFirestore, doc, getDoc, updateDoc } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

/* Firebase Config */
const firebaseConfig={
    apiKey:"AIzaSyB4SGtNZL0N4TIoJ1bGbkiAeRWJcQgrF-4",
    authDomain:"supernft-5b952.firebaseapp.com",
    projectId:"supernft-5b952",
    storageBucket:"supernft-5b952.appspot.com",
    messagingSenderId:"278097730700",
    appId:"1:278097730700:web:6ba9892334456fd8512fa9"
};
const app=initializeApp(firebaseConfig);
const auth=getAuth(app);
const db=getFirestore(app);

/* NFT Data */
const NFTS=[
{cat:"starter",price:10,p:0.2,img:"images/IMG_0458.png"},
{cat:"starter",price:15,p:0.3,img:"images/IMG_0459.png"},
{cat:"starter",price:20,p:0.4,img:"images/IMG_0460.png"},
{cat:"starter",price:25,p:0.5,img:"images/IMG_0461.png"},
{cat:"starter",price:30,p:0.6,img:"images/IMG_0462.png"},
{cat:"starter",price:35,p:0.7,img:"images/IMG_0463.png"},
{cat:"starter",price:40,p:0.8,img:"images/IMG_0464.png"},
{cat:"starter",price:45,p:0.9,img:"images/IMG_0465.png"},
{cat:"starter",price:50,p:1,img:"images/IMG_0466.png"},
{cat:"rising",price:55,p:1.3,img:"images/IMG_0467.png"},
{cat:"rising",price:60,p:1.5,img:"images/IMG_0468.png"},
{cat:"rising",price:65,p:1.63,img:"images/IMG_0469.png"},
{cat:"rising",price:70,p:1.75,img:"images/IMG_0470.png"},
{cat:"rising",price:75,p:1.88,img:"images/IMG_0471.png"},
{cat:"rising",price:80,p:2,img:"images/IMG_0472.png"},
{cat:"rising",price:90,p:2.25,img:"images/IMG_0473.png"},
{cat:"rising",price:100,p:2.5,img:"images/IMG_0474.png"},
{cat:"elite",price:150,p:5,img:"images/IMG_0475.png"},
{cat:"elite",price:200,p:6.6,img:"images/IMG_0476.png"},
{cat:"elite",price:250,p:8.25,img:"images/IMG_0477.png"},
{cat:"elite",price:300,p:10,img:"images/IMG_0478.png"},
{cat:"elite",price:350,p:11.6,img:"images/IMG_0479.png"},
{cat:"elite",price:400,p:13.3,img:"images/IMG_0480.png"},
{cat:"elite",price:450,p:15,img:"images/IMG_0481.png"},
{cat:"legendary",price:499,p:25,img:"images/IMG_0482.png"},
{cat:"legendary",price:599,p:30,img:"images/IMG_0483.png"},
{cat:"legendary",price:699,p:40,img:"images/IMG_0497.png"},
{cat:"legendary",price:799,p:30,img:"images/IMG_0498.png"},
{cat:"legendary",price:899,p:45,img:"images/IMG_0499.png"},
{cat:"legendary",price:999,p:100,img:"images/IMG_0503.png"},
];

/* Render NFTs */
const box=document.getElementById("nfts");
function render(list){
    box.innerHTML="";
    list.forEach(n=>{
        box.innerHTML+=`<div class="nft"><img src="${n.img}"><p>Price $${n.price}</p><p>Daily Income $${n.p}</p><p>Validity 365 Days</p><button onclick="buy(${n.price})">Buy NFT</button></div>`;
    });
}
render(NFTS);
function buy(p){ localStorage.setItem("price",p); location.href="nft-details.html"; }

/* Clickable stats boxes */
document.getElementById("dailyIncomeBox").addEventListener("click",()=> window.location.href="daily.html");
document.getElementById("liveEarningsBox").addEventListener("click",()=> window.location.href="live-earnings.html");
document.getElementById("depositMoney").addEventListener("click",()=> window.location.href="deposit.html");
document.getElementById("walletBalanceBox").addEventListener("click",()=> window.location.href="wallet.html");

/* Firebase Live Earnings + Wallet */
onAuthStateChanged(auth, async user=>{
    if(!user) window.location.replace("login.html");
    const snap=await getDoc(doc(db,"users",user.uid));
    if(snap.exists()){
        const data=snap.data();
        document.getElementById("dailyIncome").innerText=`$${data.dailyIncome||0}`;
        document.getElementById("liveEarnings").innerText=`$${data.liveEarnings||0}`;
        document.getElementById("depositMoney").querySelector("p").innerText=`$${data.totalDeposit||0}`;
        document.getElementById("walletBalanceP").innerText=`$${data.walletBalance||0}`;
        document.getElementById("walletBalanceTop").innerText=`$${data.walletBalance||0}`;
    }
    setInterval(async ()=>{
        const snap2=await getDoc(doc(db,"users",user.uid));
        if(!snap2.exists()) return;
        let live=0; (snap2.data().nfts||[]).forEach(nft=>{const map={"Starter NFT":1,"Rising NFT":2.5,"Elite NFT":5,"Legendary NFT":10}; live+=map[nft]||0;});
        await updateDoc(doc(db,"users",user.uid),{liveEarnings:live});
        document.getElementById("liveEarnings").innerText=`$${live.toFixed(2)}`;
    },5000);
});

/* Chart.js */
const ctx=document.getElementById("earningsChart");
const chart=new Chart(ctx,{
    type:"line",
    data:{
        labels:["Day 1","Day 2","Day 3","Day 4","Day 5","Day 6","Day 7"],
        datasets:[{
            label:"Earnings",
            data:[2,5,8,12,18,25,32],
            borderColor:"#FFD700",
            backgroundColor:"rgba(212,175,55,0.2)",
            fill:true,
            tension:0.4
        }]
    },
    options:{responsive:true,plugins:{legend:{display:false}},scales:{y:{beginAtZero:true}}}
});
</script>
</body>
</html>
