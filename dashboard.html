<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SuperNFT Dashboard</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
/* ------------------- General Body & Font ------------------- */
body{margin:0;font-family:Arial,sans-serif;background:#0f0f0f;color:#FFD700;overflow-x:hidden;}
a{text-decoration:none;color:#FFD700;}
button{cursor:pointer;}
/* ------------------- Header ------------------- */
header{position:sticky;top:0;background:#1a1a1a;color:#FFD700;padding:12px 20px;display:flex;justify-content:space-between;align-items:center;z-index:1000;box-shadow:0 2px 5px rgba(0,0,0,0.3);}
header h1{margin:0;font-size:20px;}
.menu-toggle{font-size:28px;cursor:pointer;}
/* ------------------- Sidebar ------------------- */
#sidebar{position:fixed;top:0;left:-260px;width:260px;height:100%;background:#1a1a1a;color:#FFD700;padding:20px;transition:0.3s;z-index:1100;overflow-y:auto;}
#sidebar.active{left:0;}
#sidebar h2{margin-top:0;text-align:center;margin-bottom:20px;}
#sidebar button{display:block;width:100%;margin:5px 0;padding:10px;background:#272727;border:none;color:#FFD700;font-size:14px;border-radius:6px;text-align:left;transition:0.2s;}
#sidebar button:hover{background:#333;}
/* Overlay */
#overlay{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.4);z-index:1050;display:none;}
#overlay.active{display:block;}
/* ------------------- Stats Boxes ------------------- */
.stats{display:flex;flex-wrap:wrap;gap:15px;margin:15px;}
.stat-box{flex:1 1 calc(50% - 15px);background:#1a1a1a;padding:15px;border-radius:10px;text-align:center;transition:0.3s;cursor:pointer;}
.stat-box:hover{background:#272727;}
.stat-box h2{margin:0 0 8px;font-size:14px;}
.stat-box p{margin:0;font-size:18px;font-weight:bold;}
/* ------------------- NFT Grid ------------------- */
.categories{display:flex;justify-content:center;flex-wrap:wrap;gap:8px;margin:10px;}
.categories button{padding:6px 10px;background:#272727;border:none;color:#FFD700;border-radius:6px;transition:0.2s;}
.categories button.active, .categories button:hover{background:#FFD700;color:#000;}
.nft-grid{display:flex;flex-wrap:wrap;gap:12px;margin:15px;}
.nft{background:#1a1a1a;border-radius:10px;padding:8px;flex:1 1 calc(50% - 12px);text-align:center;transition:0.3s;}
.nft:hover{transform:scale(1.02);}
.nft img{width:100%;border-radius:8px;}
.nft h3{margin:8px 0 4px;font-size:14px;}
.nft p{margin:3px 0;font-size:13px;}
.nft button{background:#FFD700;border:none;padding:6px 10px;border-radius:6px;color:#000;font-weight:bold;transition:0.2s;}
.nft button:hover{background:#e0c200;}
/* ------------------- Earnings Chart ------------------- */
#earningsChart{background:#1a1a1a;padding:10px;border-radius:10px;margin:15px auto;display:block;width:95%;}
/* ------------------- Footer ------------------- */
footer{background:#1a1a1a;color:#FFD700;padding:15px;text-align:center;font-size:13px;margin-top:20px;}
footer button{margin:3px;padding:6px 10px;background:#272727;border:none;border-radius:6px;color:#FFD700;transition:0.2s;}
footer button:hover{background:#FFD700;color:#000;}
/* ------------------- Responsive ------------------- */
@media(max-width:480px){
  .stat-box,.nft{flex:1 1 calc(50% - 12px);}
}
</style>
</head>
<body>

<header>
  <span class="menu-toggle">&#9776;</span>
  <h1>SuperNFT Dashboard</h1>
  <div id="walletBalanceTop">$0</div>
</header>

<div id="overlay"></div>

<div id="sidebar">
  <h2>Menu</h2>
  <button onclick="openPage('account')">üë§ My Account</button>
  <button onclick="openPage('investments')">üìÅ My Investments</button>
  <button onclick="openPage('wallet')">üí≥ Wallet</button>
  <button onclick="openPage('withdraw')">üí∏ Withdraw</button>
  <button onclick="openPage('live')">üíπ Live Earnings</button>
  <button onclick="openPage('team')">üë• My Team</button>
  <button onclick="openPage('level')">üìä My Level</button>
  <button onclick="openPage('calculator')">üìà Calculator</button>
  <button onclick="openPage('settings')">‚öôÔ∏è Settings</button>
  <button id="logoutBtn">üîí Logout</button>
</div>

<!-- Stats Boxes -->
<div class="stats">
  <div class="stat-box" id="dailyIncomeBox"><h2>Daily Income</h2><p id="dailyIncome">$12.50</p></div>
  <div class="stat-box" id="liveEarningsBox"><h2>Live Earnings</h2><p id="liveEarnings">$42.10</p></div>
  <div class="stat-box" id="depositMoney"><h2>Total Deposit</h2><p>$300</p></div>
  <div class="stat-box" id="walletBalanceBox"><h2>Wallet Balance</h2><p id="walletBalanceP">$120</p></div>
</div>

<!-- Referral Code -->
<div style="text-align:center;margin:10px;">
  Referral Code: <span id="myCode">ABC123</span>
  <button id="copyBtn">Copy</button>
  <button id="shareBtn">Share</button>
</div>

<!-- NFT Category Filters -->
<div class="categories">
  <button class="active" onclick="filterNFT('all')">All</button>
  <button onclick="filterNFT('starter')">Starter</button>
  <button onclick="filterNFT('rising')">Rising</button>
  <button onclick="filterNFT('elite')">Elite</button>
  <button onclick="filterNFT('legendary')">Legendary</button>
</div>

<!-- NFT Grid -->
<div class="nft-grid" id="nfts"></div>

<!-- Earnings Chart -->
<h2 style="margin-left:15px;">Earnings Chart</h2>
<canvas id="earningsChart" width="400" height="200"></canvas>

<!-- Footer -->
<footer>
  <button onclick="openPage('daily')">üìÖ Daily Income</button>
  <button onclick="openPage('live')">üíπ Live Earnings</button>
  <button onclick="openPage('deposit')">üí∞ Deposit</button>
  <button onclick="openPage('wallet')">üí≥ Wallet</button>
  <button onclick="openPage('calculator')">üìà Calculator</button>
</footer>

<script type="module">
/* ------------------- Firebase Setup ------------------- */
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";
import { getFirestore, doc, getDoc, updateDoc } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

const firebaseConfig = {apiKey:"AIzaSyB4SGtNZL0N4TIoJ1bGbkiAeRWJcQgrF-4",authDomain:"supernft-5b952.firebaseapp.com",projectId:"supernft-5b952",storageBucket:"supernft-5b952.appspot.com",messagingSenderId:"278097730700",appId:"1:278097730700:web:6ba9892334456fd8512fa9"};
const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getFirestore(app);

/* ------------------- NFT Array ------------------- */
const NFTS=[
{cat:"starter",price:10,p:0.2,img:"images/IMG_0458.png"},{cat:"starter",price:15,p:0.3,img:"images/IMG_0459.png"},{cat:"starter",price:20,p:0.4,img:"images/IMG_0460.png"},{cat:"starter",price:25,p:0.5,img:"images/IMG_0461.png"},{cat:"starter",price:30,p:0.6,img:"images/IMG_0462.png"},{cat:"starter",price:35,p:0.7,img:"images/IMG_0463.png"},{cat:"starter",price:40,p:0.8,img:"images/IMG_0464.png"},{cat:"starter",price:45,p:0.9,img:"images/IMG_0465.png"},{cat:"starter",price:50,p:1,img:"images/IMG_0466.png"},{cat:"rising",price:55,p:1.3,img:"images/IMG_0467.png"},{cat:"rising",price:60,p:1.5,img:"images/IMG_0468.png"},{cat:"rising",price:65,p:1.63,img:"images/IMG_0469.png"},{cat:"rising",price:70,p:1.75,img:"images/IMG_0470.png"},{cat:"rising",price:75,p:1.88,img:"images/IMG_0471.png"},{cat:"rising",price:80,p:2,img:"images/IMG_0472.png"},{cat:"rising",price:90,p:2.25,img:"images/IMG_0473.png"},{cat:"rising",price:100,p:2.5,img:"images/IMG_0474.png"},{cat:"elite",price:150,p:5,img:"images/IMG_0475.png"},{cat:"elite",price:200,p:6.6,img:"images/IMG_0476.png"},{cat:"elite",price:250,p:8.25,img:"images/IMG_0477.png"},{cat:"elite",price:300,p:10,img:"images/IMG_0478.png"},{cat:"elite",price:350,p:11.6,img:"images/IMG_0479.png"},{cat:"elite",price:400,p:13.3,img:"images/IMG_0480.png"},{cat:"elite",price:450,p:15,img:"images/IMG_0481.png"},{cat:"legendary",price:499,p:25,img:"images/IMG_0482.png"},{cat:"legendary",price:599,p:30,img:"images/IMG_0483.png"},{cat:"legendary",price:699,p:40,img:"images/IMG_0497.png"},{cat:"legendary",price:799,p:30,img:"images/IMG_0498.png"},{cat:"legendary",price:899,p:45,img:"images/IMG_0499.png"},{cat:"legendary",price:999,p:100,img:"images/IMG_0503.png"}];

const box=document.getElementById("nfts");
function render(list){
  box.innerHTML="";
  list.forEach(n=>{
    box.innerHTML+=`
    <div class="nft">
      <img src="${n.img}" onclick="buy(${n.price})">
      <h3>Price $${n.price}</h3>
      <p>Daily Income $${n.p}</p>
      <p>Validity 365 Days</p>
      <button onclick="buy(${n.price})">Buy NFT</button>
    </div>`;
  });
}
render(NFTS);

function filterNFT(c){
  document.querySelectorAll(".categories button").forEach(b=>b.classList.remove("active"));
  event.target.classList.add("active");
  if(c==="all") render(NFTS);
  else render(NFTS.filter(n=>n.cat===c));
}

function buy(p){ localStorage.setItem("price",p); location.href="nft-details.html"; }

/* ------------------- Stats Click ------------------- */
document.getElementById("dailyIncomeBox").addEventListener("click",()=> window.location.href="daily.html");
document.getElementById("liveEarningsBox").addEventListener("click",()=> window.location.href="live-earnings.html");
document.getElementById("depositMoney").addEventListener("click",()=> window.location.href="deposit.html");
document.getElementById("walletBalanceBox").addEventListener("click",()=> window.location.href="wallet.html");

/* ------------------- Firebase Live Update ------------------- */
onAuthStateChanged(auth, async user=>{
  if(!user) window.location.replace("login.html");
  const snap=await getDoc(doc(db,"users",user.uid));
  if(snap.exists()){
    const data=snap.data();
    document.getElementById("myCode").innerText = data.myReferralCode || "N/A";
    document.getElementById("dailyIncome").innerText = `$${data.dailyIncome||0}`;
    document.getElementById("liveEarnings").innerText = `$${data.liveEarnings||0}`;
    document.getElementById("depositMoney").querySelector("p").innerText = `$${data.totalDeposit||0}`;
    document.getElementById("walletBalanceP").innerText = `$${data.walletBalance||0}`;
    document.getElementById("walletBalanceTop").innerText = `$${data.walletBalance||0}`;
  }
  setInterval(async ()=>{
    const snap2=await getDoc(doc(db,"users",user.uid));
    if(!snap2.exists()) return;
    let live=0; (snap2.data().nfts||[]).forEach(nft=>{const map={"Starter NFT":1,"Rising NFT":2.5,"Elite NFT":5,"Legendary NFT":10}; live+=map[nft]||0;});
    await updateDoc(doc(db,"users",user.uid),{liveEarnings:live});
    document.getElementById("liveEarnings").innerText=`$${live.toFixed(2)}`;
  },5000);
});

/* ------------------- Logout ------------------- */
document.getElementById("logoutBtn").addEventListener("click",()=>signOut(auth).then(()=>window.location.replace("login.html")));

/* ------------------- Referral ------------------- */
document.getElementById("copyBtn").addEventListener("click",()=>{navigator.clipboard.writeText(document.getElementById("myCode").innerText);alert("Referral code copied ‚úÖ");});
document.getElementById("shareBtn").addEventListener("click",()=>{const code=document.getElementById("myCode").innerText;const text=`Join SuperNFT with my referral code: ${code}`;const url=encodeURIComponent(window.location.href);window.open(`https://api.whatsapp.com/send?text=${encodeURIComponent(text)} ${url}`,"_blank");});

/* ------------------- Sidebar Toggle ------------------- */
const menuToggle=document.querySelector(".menu-toggle");
const sidebar=document.getElementById("sidebar");
const overlay=document.getElementById("overlay");
menuToggle.addEventListener("click",()=>{sidebar.classList.add("active");overlay.classList.add("active");});
overlay.addEventListener("click",()=>{sidebar.classList.remove("active");overlay.classList.remove("active");});

function openPage(p){alert("Open "+p+" page placeholder");}

</script>
<script>
/* ------------------- Chart ------------------- */
const ctx=document.getElementById("earningsChart");
const chart=new Chart(ctx,{
  type:"line",
  data:{
    labels:["Day 1","Day 2","Day 3","Day 4","Day 5","Day 6","Day 7"],
    datasets:[{label:"Earnings",data:[2,5,8,12,18,25,32],borderColor:"#FFD700",backgroundColor:"rgba(212,175,55,0.2)",fill:true,tension:0.4}]
  },
  options:{responsive:true,plugins:{legend:{display:false}},scales:{y:{beginAtZero:true}}}
});
</script>
</body>
</html>
