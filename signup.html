<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SuperNFT Signup</title>
<style>
body { font-family: Arial, sans-serif; background: #0b0f1a; color: #fff; display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; }
form { background: #111827; padding: 30px; border-radius: 10px; display: flex; flex-direction: column; width: 300px; }
input { margin-bottom: 15px; padding: 10px; border-radius: 6px; border: none; font-size: 14px; }
button { padding: 10px; border-radius: 6px; border: none; background: #38bdf8; color: #0b0f1a; font-weight: bold; cursor: pointer; }
button:hover { background: #10b981; color: #fff; }
h1 { text-align: center; margin-bottom: 20px; color: #38bdf8; }
</style>
</head>
<body>

<form id="signupForm">
  <h1>Sign Up</h1>
  <input type="text" id="name" placeholder="Full Name" required>
  <input type="email" id="email" placeholder="Email" required>
  <input type="password" id="password" placeholder="Password" required>
  <button type="submit">Sign Up</button>
</form>

<!-- Firebase -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
import { getAuth, createUserWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";
import { getFirestore, doc, setDoc } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

// ðŸ”¹ FIREBASE CONFIG
const firebaseConfig = {
  apiKey: "AIzaSyB4SGtNZL0N4TIoJ1bGbkiAeRWJcQgrF-4",
  authDomain: "supernft-5b952.firebaseapp.com",
  projectId: "supernft-5b952",
  storageBucket: "supernft-5b952.appspot.com",
  messagingSenderId: "278097730700",
  appId: "1:278097730700:web:014d5ab680859db4512fa9",
  measurementId: "G-BME7FWT355"
};

// ðŸ”¹ INITIALIZE FIREBASE
const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getFirestore(app);

// ðŸ”¹ SIGNUP LOGIC
const signupForm = document.getElementById("signupForm");
signupForm.addEventListener("submit", async (e) => {
  e.preventDefault();

  const name = document.getElementById("name").value.trim();
  const email = document.getElementById("email").value.trim();
  const password = document.getElementById("password").value;

  if (!name || !email || !password) {
    alert("Please fill all fields!");
    return;
  }

  try {
    // Create Firebase Auth User
    const userCredential = await createUserWithEmailAndPassword(auth, email, password);
    const user = userCredential.user;

    // Save user info to Firestore
    await setDoc(doc(db, "users", user.uid), {
      name,
      email,
      role: "user",
      createdAt: new Date().toISOString(),
      myReferralCode: "REF" + Math.floor(Math.random() * 10000),
      dailyIncome: 0,
      liveEarnings: 0,
      totalDeposit: 0,
      walletBalance: 0
    });

    alert("Signup successful! Redirecting to dashboard...");
    window.location.href = "dashboard.html";

  } catch (err) {
    console.error(err);
    alert(`Error: ${err.message}`);
  }
});
</script>

</body>
</html>
