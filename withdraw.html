<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Withdraw</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<style>
body{margin:0;font-family:Arial;background:#020617;color:#fff}
header{text-align:center;padding:15px;color:#38bdf8}
.box{background:#0f172a;margin:12px;padding:12px;border-radius:12px}
input,button{width:100%;padding:8px;margin-top:6px}
button{background:#38bdf8;border:none}
</style>
</head>

<body>

<header>Withdraw</header>

<div class="box">
Balance: <b id="bal">$0</b>
</div>

<div class="box">
<input id="amt" type="number" placeholder="Amount">
<input id="wal" placeholder="Wallet Address">
<button onclick="req()">Withdraw</button>
<div id="msg"></div>
</div>

<script>
function liveBal(){
  const d=JSON.parse(localStorage.getItem("myNFTs"))||[];
  let l=0;
  d.forEach(n=>l+=((Date.now()-n.boughtAt)/1000)*(n.daily/86400));
  return Math.max(l-(Number(localStorage.getItem("withdrawedTotal"))||0),0);
}
setInterval(()=>bal.innerText="$"+liveBal().toFixed(4),1000);

function req(){
  const a=Number(amt.value);
  if(a<10||a>liveBal()) return msg.innerText="Invalid";
  const r=JSON.parse(localStorage.getItem("withdrawRequests"))||[];
  r.push({
    amount:a,
    fee:a*0.05,
    final:a*0.95,
    status:"Pending",
    time:new Date().toLocaleString()
  });
  localStorage.setItem("withdrawRequests",JSON.stringify(r));
  msg.innerText="Request Sent";
}
</script>
</body>
</html>
